# 박정모 연습문제
>2022-03-31

## 공통 HTML 코드

```html
<body>
        <div class="subplot">
            <h1>문제1.</h1>
            <h2>학과별 학생 수 세로 막대그래프</h2>
            <div class="subplot-item">
                <canvas id="mychart1"></canvas>
            </div>
        </div>

        <div class="subplot">
            <h1>문제2.</h1>
            <h2>학년별 평균나이변화 선 그래프</h2>
            <div class="subplot-item">
                <canvas id="mychart2"></canvas>
            </div>
        </div>

        <div class="subplot">
            <h1>문제3.</h1>
            <h2>학년별 평균키와 평균 몸무게 세로 다중막대 그래프</h2>
            <div class="subplot-item">
                <canvas id="mychart3"></canvas>
            </div>
        </div>
```


# 문제1.
```html
        <script src="libs/dataset.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
        <script>
            /**
             * 문제 1번
             */
            // 학과 이름 배열 추출
            const departmentAll = [];
            const department = [];
            for (let i = 0; i < student.length; i++) {
                departmentAll[i] = student[i].deptno;
            }

            departmentAll.forEach((v, i) => {
                if (!department.includes(v)) {
                    department.push(v);
                }
            });

            // 학과별 학생 수 추출
            const studentCount = [];
            for (let i = 0; i < department.length; i++) {
                studentCount[i] = 0;
                for (let j = 0; j < departmentAll.length; j++) {
                    if (department[i] == departmentAll[j]) {
                        studentCount[i]++;
                    }
                }
            }
            console.log(department);
            console.log(studentCount);

            // chart 표시 영역
            const mychart1 = document.getElementById("mychart1");

            new Chart(mychart1, {
                type: "bar",
                data: {
                    labels: department,
                    datasets: [
                        {
                            label: "학생수",
                            data: studentCount,
                            borderWidth: 0.5,
                            borderColor: ["rgba(120,255,0,1)", "rgba(255,120,0,1)"],
                            backgroundColor: ["rgba(120,255,0,0.2)", "rgba(255,120,0,0.2)"],
                        },
                    ],
                },
                options: {
                    maintainAspectRatio: false,
                },
            });
```

# 문제 2번.

```js
            /**
             * 문제 2번
             */

            // 학년 이름을 원소로 갖는 배열 grade
            const grade = [];
            for (let i = 0; i < student.length; i++) {
                if (!grade.includes(student[i].grade)) {
                    grade.push(student[i].grade);
                }
            }

            for (let i = 0; i < grade.length; i++) {
                grade[i] += "학년";
            }
            console.log(grade);

            // 학년별 나이 데이터 추출
            const ageInfo = {};
            let tmp = [];

            // 학년 갯수만큼 반복을 돌며, 이중 반복으로 학생 전체에서 학년별 각 학생의 나이를
            // 배열로 추출 -> json에 대입
            for (let i = 0; i < grade.length; i++) {
                for (let j = 0; j < student.length; j++) {
                    if (student[j].grade + "학년" == grade[i]) {
                        let age = 2022 - student[j].birthdate.substring(0, 4) + 1;
                        tmp.push(age);
                    }
                }
                console.log(tmp);
                ageInfo[grade[i]] = tmp;
                tmp = [];
            }

            console.log(ageInfo);
            console.log(ageInfo[grade[0]]);

            // 학년별 평균 나이

            const avgAge = [];
            for (let i = 0; i < grade.length; i++) {
                let count = 0;
                for (let j = 0; j < ageInfo[grade[i]].length; j++) {
                    count += ageInfo[grade[i]][j];
                }
                let avg = count / ageInfo[grade[i]].length;
                avgAge.push(avg.toFixed(2));
            }
            console.log(avgAge);

            //grade = ['4학년', '1학년', '3학년', '2학년'];
            //avgAge = [24.33, 20.00, 22.50, 21.80];

            // 학년별 순서 정리
            for (let i = 0; i < grade.length - 1; i++) {
                for (let j = i + 1; j < grade.length; j++) {
                    if (grade[i] > grade[j]) {
                        let tmp = grade[j];
                        grade[j] = grade[i];
                        grade[i] = tmp;
                        let tmp2 = avgAge[j];
                        avgAge[j] = avgAge[i];
                        avgAge[i] = tmp2;
                    }
                }
            }

            // 선 그래프
            new Chart(mychart2, {
                type: "line",
                data: {
                    labels: grade,
                    datasets: [
                        {
                            label: "평균나이",
                            data: avgAge,
                            borderWidth: 1,
                            borderColor: "#ff33ff",
                        },
                    ],
                },
                options: {
                    maintainAspectRatio: false,
                },
            });
```


# 문제 3번

```js
            /**
             * 문제 3번.
             */

            const bodyInfo = {};
            for (let i = 0; i < grade.length; i++) {
                bodyInfo[grade[i]] = {};
                bodyInfo[grade[i]].height = [];
                bodyInfo[grade[i]].weight = [];
            }
            console.log(bodyInfo);

            for (let i = 0; i < grade.length; i++) {
                const k = grade[i].charAt(0);
                for (let j = 0; j < student.length; j++) {
                    if (student[j].grade == k) {
                        bodyInfo[grade[i]].height.push(student[j].height);
                        bodyInfo[grade[i]].weight.push(student[j].weight);
                    }
                }
            }
            console.log(bodyInfo);

            //필요한 데이터 -> [1학년 평균키, 2학년 평균키, 3학년 평균키, 4학년 평균키]
            //                 [1학년 평균체중, 2학년 평균체중, 3학년 평균체중, 4학년 평균체중]
            //가진 데이터 -> grade = ["1학년", "2학년", "3학년", "4학년"]
            //               bodyInfo
            const height = [];
            const weight = [];

            for (const k in bodyInfo) {
                let sum = 0;
                for (const l of bodyInfo[k].height) {
                    sum += l;
                }
                let avg = sum / bodyInfo[k].height.length;
                height.push(avg);
            }
            console.log(height);

            for (const k in bodyInfo) {
                let sum = 0;
                for (const l of bodyInfo[k].weight) {
                    sum += l;
                }
                let avg = sum / bodyInfo[k].weight.length;
                weight.push(avg);
            }
            console.log(weight);

            new Chart(mychart3, {
                type: 'bar',
                data: {
                    labels: grade,
                    datasets: [
                        {
                            label: '학년별 평균키',
                            data: height,
                            borderColor: 'rgba(54, 152, 235, 1)',
                            backgroundColor: 'rgba(54, 152, 235, 0.2)',
                        },
                        {
                            label:'학년별 평균 체중',
                            data: weight,
                            borderColor: 'rgba(255,99,132,1)',
                            backgroundColor: 'rgba(255,99,132,0.2)',
                        }
                    ]
                },
                options: {
                    maintainAspectRatio: false,
                }
            })
```

### 3번 평균 체중, 키 구하는 부분을 함수로 처리해보려고 했는데, 에러가 자꾸 나서 일단 하드코딩으로 진행했습니다...
   
### ***실행결과 스크린샷***
![문제](libs/%EC%97%B0%EC%8A%B5%EB%AC%B8%EC%A0%9C.png)
   